---
title:  "Visual Exploration of Data"
type:   content
---

# Data

In today's exercise we're going to be exploring a relatively simple data set that was compiled for a recent article at [FiveThirtyEight](https://github.com/fivethirtyeight/data/tree/master/college-majors) looking at employment for recent college graduates by major using American Community Survey data.  Being good data scientists they open source the data behind their work, often alongside analysis scripts.

As you'll see this data set is already pretty tidy and ready to work with.  On Thursday we'll look at how to fix messy data.  For now, we'll just use the RStudio data Import wizard to load the data over the web.

In R Studio:

* Click "Import Data Set" on the "Environment" tab.  
* Choose "From CSV" (for **c**omma **s**eparated **v*alues)
* Use [this](https://github.com/fivethirtyeight/data/raw/master/college-majors/recent-grads.csv) URL and hit update.
* Check that the file parsed correctly (you should see a table)
* Hit "Import"

You always want to start a new project by giving yourself a few minutes to understand the structure of your data, particularly in a case like this where it's not data you generated yourself.  See the description of data in each column of this data set [here](https://github.com/fivethirtyeight/data/tree/master/college-majors).

<br>

# Signal strength: data dispersion

When you're doing exploratory data analysis you should always be thinking very intentionally about the relationship between the **question** you want to ask and *what* you're visualizing and *how* you're visualizing it.  In virtually all cases, the first question you should ask is: what's the magnitude of the signal?  Put another way, how variable are each of the variables?  You'll treat a variable with 1% variation across samples very differently than one with 10-orders of magnitude variation.  Let's take a quick look at some simple summary statistics for each variable in this table.

##

Like the `plot` function, R's `summary` function is a little bit magical:

```{r eval=FALSE}
summary(recent_grads)
```

Take a moment to digest the output; what did we get?

##

Let's think about this data set:

* Is there signal?  How disperse are the data for each variable?
* Are there missing data?
* Are all of our vectors of the correct type?  What might we want to change?

##

Before we go on, let's fix the `Major_category` variable.  To make a factor, use the `factor` function:

```{r}
recent_grads$Major_category <- factor(recent_grads$Major_category)
```

Take a moment to unpack what we just did there.  See `?factor` for additional optional arguments that let you specify an ordering.

##

How does the `summary` change when this variable is a `factor`?

##

Getting the median and quartile ranges for the variables in our data set is useful, but they don't tell the whole data dispersion story.

To visualize dispersion for quantitative variable we can use a histogram or density plot.  Let's look at the distribution of median incomes.

```{r}
library(ggplot2)
```

##

```{r}
ggplot(recent_grads, aes(Median)) + geom_density()
```

##

What does this plot tell us about median income distribution?

##

So, we've got some income variability to work with!  Check data dispersion for other quantitative variables in the data set.

<br>

# More than two dimensions

As we've seen, making 2D scatter plots with `geom_points` is a great way to visualize the interaction between two quantitative variables; often you're doing this to ask whether or not they appear to be correlated.  But how can we layer in additional information from other quantitative or categorical variables?

##

As we've seen, you can use color to transform a plot like this:

```{r}
ggplot(recent_grads, aes(P25th, P75th)) + geom_point()
```

##

Into one like this:

```{r}
ggplot(recent_grads, aes(P25th, P75th, color = Major_category)) + geom_point()
```

##

He we get discrete colors for each `Major_category` because it's a categorical variable (a factor!).  If we set color to be a quantitative variable, we'll get a continuous shading scale:

```{r}
ggplot(recent_grads, aes(P25th, P75th, color = ShareWomen)) + geom_point()
```


##

We can also use point `size` to visualize additional quantitative variables:

```{r}
ggplot(recent_grads, aes(P25th, P75th, color = Major_category, size = Total)) + geom_point()
```

##

Finally, values can be mapped to `alpha` to visually "weight" points:

```{r}
ggplot(recent_grads, aes(P25th, P75th, color = Major_category, size = Total, alpha = Sample_size)) + geom_point()
```

Finally, you can use `shape` to change the shape of points, but I would strongly recommend avoiding this for anything other than a categorical variable with a very small number of levels

<br>

# Your turn!

Let's ask some new questions and make some plots.

